{% extends 'base.html' %}
{% block head %}
<style>
    body { font-family: Arial, sans-serif; background: #181c22; color: #fff; margin: 0; }
    #controls { padding: 10px; background: #23272f; }
    #controls button { margin-right: 10px; }
    #video-grid { display: flex; flex-wrap: wrap; gap: 10px; padding: 10px; }
    video { width: 300px; height: 220px; background: #222; border-radius: 8px; }
    .muted { border: 2px solid red; }
    .hidden { opacity: 0.2; }

    #chat-container { position: fixed; bottom: 0; right: 0; width: 320px; background: #222; border-radius: 8px 8px 0 0; }
    #chat-messages { height: 200px; overflow-y: auto; padding: 10px; border-bottom: 1px solid #333; }
    #chat-input-row { display: flex; }
    #chat-input { flex: 1; padding: 8px; border: none; border-radius: 0 0 0 8px; }
    #chat-send { padding: 8px 12px; border: none; border-radius: 0 0 8px 0; background: #39424e; color: #fff; }
    #chat-send:hover { background: #5a6a85; }
    .chat-msg { margin-bottom: 8px; }
    .chat-user { font-weight: bold; color: #83aaff; }
    .chat-self  { color: #b2ffb2; }
    @media (max-width: 800px) {
      #video-grid { flex-direction: column; align-items: center; }
      video { width: 95vw; height: auto; }
      #chat-container { width: 95vw; }
    }
</style>
{% endblock %}
{% block content %}
{% load app_filters %}
  <div id="controls" class="d-flex align-items-center gap-2">
    <button id="muteBtn" class="btn btn-secondary btn-sm">Mute</button>
    <button id="videoBtn" class="btn btn-secondary btn-sm">Hide Video</button>
    <button id="screenshareBtn" class="btn btn-primary btn-sm">Share Screen</button>
    <span id="meeting-id" class="ms-3 badge bg-info text-dark"></span>
  </div>
  <div id="video-outer-container">
    <div id="video-grid-container">
      <div id="video-grid"></div>
    </div>
    <div id="video-page-controls">
      <button id="prevPageBtn" class="btn btn-dark btn-sm">&laquo;</button>
      <span id="video-page-indicator">Page 1/1</span>
      <button id="nextPageBtn" class="btn btn-dark btn-sm">&raquo;</button>
    </div>
  </div>
  <div id="chat-container" class="shadow">
    <div id="chat-messages"></div>
    <div id="chat-input-row">
      <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off" class="form-control form-control-sm border-0">
      <button id="chat-send" class="btn btn-primary btn-sm rounded-0">Send</button>
    </div>
  </div>
{% endblock %}
{% block javascript %}
{% include 'meetings/meeting.js' %}
{% endblock %}
