<!doctype html> <html lang="et">


  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Professionaalne meelelahutus, fotod, videod, heli, otseülekanne ja juhuslik mäng, samuti ID -skaneerimine, veebiarendus- ja asendusteenused.">
    <meta name="author" content="Charlotte Grace Harper">
    <link rel="icon" href="/media/favicon.ico">
    <title>Video Chat - Glam Girl X</title>
    <link rel="canonical" href="https://glamgirlx.com/et/chat">
    <link href="/static/main.css" rel="stylesheet">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/static/fonts/bootstrap-icons.css">
    
      <style type="text/css">
         * {
	         box-sizing: border-box;
         }
         body {
	         margin: 20 !important;
         }
         .centered {
	         display: block;
	         margin: 0 auto;
         }
         .hide {
	         opacity: 0;
	         display: none;
	         visibility: hidden;
	         pointer-events: none;
         }
         .call-button {
	         padding: 0.5rem 1rem;
	         border: none;
	         font-size: 24px !important;
	         border-radius: 2px;
	         cursor: pointer;
	         color: white;
	         background-color: black;
	         box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.3);
         }
         #please-interact {
	         padding: 0.5rem 1rem;
	         border: none;
	         font-size: 24px !important;
	         border-radius: 3px;
	         cursor: pointer;
	         color: white;
	         background-color: black;
	         box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.3);
         }
         #video-container {
	         width: 100%;
	         min-width: 300px;
         }
         #videos {
	         position: relative;
         }
         video {
	         background-color: black;
	         border-radius: 3px;
	         box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.3);
         }
         #local-video {
	         position: absolute;
	         width: 25vw;
	         height: 25vw;
	         bottom: -30px;
	         right: 0px;
         }
         .d-flex {
	         display: flex;
         }
         .justify-content-between {
	         justify-content: space-between;
         }
         .badge {
	         padding: 0.2rem 0.2rem;
	         font-size: 16px !important;
	         border: none;
	         border-radius: 2px;
	         cursor: pointer;
	         box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.3);
         }
         .btn-xlarge {
	         padding: 18px 18px;
	         font-size: 30px;
	         line-height: normal;
	         -webkit-border-radius: 8px;
	         -moz-border-radius: 8px;
	         border-radius: 8px;
         }
         .fullscreen-vid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow-y: scroll;
            background-color: white;
            z-index: 10000;
        }
        #remote-video {
          width: 100%;
        }
        .btn {
            font-size: 24px !important;
        }
      </style>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6209985848112194"
         crossorigin="anonymous"></script>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-XG1SZ2K8S5"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-XG1SZ2K8S5');
	</script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16692395808">
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-16692395808');
    </script>
  </head>
  <body>
    <header>
      
      
      <nav id="glam-navbar" class="navbar fixed-top navbar-expand-lg navbar-light p-2" style="background-color: #e3f2fd;">
        <a style="position: relative; z-index: 1;" class="navbar-brand" href="/et/" title="Koduleht">
	        <img src="/media/lips.png" alt="Logo - Glam Girl X" width="30" height="30" style="border-radius: 50%; background-color: transparent;">
	    	Glam Girl X
    	</a>
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" data-bs-auto-close="true" data-bs-toggle="dropdown" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        
        <div class="collapse navbar-collapse " id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="/et/news" title="Uued artiklid">Uudised</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/et/contact" title="Võtke minuga ühendust">Kontakt</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/et/landing" title="Külastage maandumislehte">Maandumine</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/et/chat" title="Videovestlus">Vestlus</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/et/private" title="Vaadake võtmega privaatfotosid">Era-</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://lotteh.com/payments/surrogacy/Daisy/?lang=et" title="Surrogacy plans">Surrogaatia</a>
            </li>
          </ul>
          <ul class="navbar-nav" style="margin-left: auto;">
            <form class="form-inline d-flex mt-2 mt-md-0" action="https://lotteh.com/search/" method="GET">
              <input class="form-control hide" type="text" id="lang" name="lang" value="et">
              <input class="form-control mr-sm-2" type="text" id="q" name="q" placeholder="Otsima" aria-label="Otsima" required>
              <button class="btn btn-outline-success my-2 my-sm-0" type="submit" title="Otsige minu veebisaiti, lotteh.com">Otsima</button>
            </form>
            <li class="nav-item">
              <a class="nav-link" href="/links" title="Vaadake linke, mida jagan">Minu lingid</a>
            </li>
            <li class="nav-item align-middle">
              <small><i><a class="text-dark nav-link" style="vertical-align: middle;" id="current-time">

--- ---
</a></i></small>

            </li>
            <li class="nav-item align-middle">
              <small><i><a class="text-dark nav-link" style="vertical-align: middle;" id="current-time-text">


</a></i></small>

            </li>
            <li class="nav-item">
	          <a href="https://lotteh.com/landing/" title="Külastage maandumislehte">
                <div class="dynamicClockContainer" id="dynamicClockContainer" style="background-color: #ffcccb;">
        <div class="dhour" id="hour"></div> 
        <div class="dminute" id="minute"></div> 
        <div class="dsecond" id="second"></div> 
</div> 

              </a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    
    <main role="main" class="container">
        
	    <div style="height: 100px;"></div>
        
	    

      <legend>Videovestlus</legend>
      <p id="error-message" class="hide" style="text-color: red;">Jätkamiseks lubage oma kaamera ja mikrofon oma veebibrauseris ja seadme sätetes. Laadige jätkamiseks uuesti. <button onclick="window.location.reload();" title="Laadige uuesti leht" class="call-button">Uuesti laadima</button></p>
      <div id="main-screen">
      <div id="all-div" class="hide">
         <div id="accept-div" class="hide">
            <div id="accept-text"></div>
            <button onclick="denyCall();" style="color: red;" class="btn">Eitama</button><button onclick="acceptCall();" style="color: green;" class="btn">Aktsepteerima</button>
         </div>
         <p id="the-link" style="visibility: 0; display: none;" class="hide"></p>
         <small id="members"></small>
         <p id="call-div">Teie kasutajanimi on <b id="thename" style="font-size: 26px;"></b> <button id="update-username" class="btn update-button">Värskendama</button> <button class="call-button" style="font-size: 20px;" onclick="copyToClipboard('thename');" class="btn btn-outline-primary">Koopiakood</button> <button class="call-button" style="font-size: 20px;" onclick="copyToClipboard('the-link');" class="btn btn-outline-primary">Koopia link</button></p>
         <button id="call-button" class="call-button">Helistage kellelegi</button>
         <div>
            <div id="video-container" class="centered hide">
               <div id="videos">
                  <video id="local-video" autoplay="autoplay" muted></video>
                  <video id="remote-video" autoplay="autoplay"></video>
               </div>
            </div>
         </div>
      </div>
      <div style="display: inline-block;"><button id="end-button" class="call-button hide">Lõppkõne</button><button id="mute" class="btn btn-outline-light hide" style="border: 1px solid black !important; text-color: black !important; color: black !important;">Vaigistama</button><button id="still" class="btn btn-outline-info hide" style="color: black;">Laadige alla</button><button onclick="$('#main-screen').toggleClass('fullscreen-vid');" class="btn btn-outline-success" style="color: black;">Lülitage täisekraani</button></div>
      </div>
      <button class="btn btn-lg btn-outline-primary" id="please-interact">Liituma koosolekuga</button>
      <div style="height: 50px;"></div>
      <small>Antud <a href="https://glamgirlx.com">glamgirlx.com</a>.</small>
      <p style="font-size: 10px !important;"><small><i>Jätke mulle selle aadressi abil Bitcoini näpunäide:</i> <b id="btc-wallet">3KhDWoSve2N627RiW8grj6XrsoPT7d6qyE</b> <button class="btn btn-sm btn-info" title="Koopiaadress" onclick="copyToClipboard('btc-wallet');">Koopia</button></small></p>
      
<div style="margin:auto;" class="center col-md-6 p-3 rounded mb-3 bg-white">
<div class="mb-2" style="display: flex; justify-content: space-around;">
<a title="Jagage Facebookis" target="_blank" class="btn btn-light btn-xlarge" href="https://www.facebook.com/dialog/feed?&app_id=845349032833671&link=https%3A%2F%2Fglamgirlx.com%2Fet%2Fchat%3F&quote=Visit%20this%20link%20on%20Glam%20Girl%20X&display=popup&hashtag=#lotteh&redirect_uri=https%3A%2F%2Fglamgirlx.comhttps%3A%2F%2Fglamgirlx.com" title="Share on Facebook"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16"  style="text-color: #4267B2 !important; color: #4267B2 !important;">
  <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/></svg></a>
<a title="Jaga x -s (endine Twitter)" target="_blank" class="btn btn-xlarge btn-light" href="https://twitter.com/intent/tweet/?text=Visit%20this%20link%20on%20Glam%20Girl%20X%20-&url=https://glamgirlx.com/et/chat?" title="Share on X"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16" style="text-color: #000000 !important; color: #000000 !important;">
  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/>
</svg></a>
<a title="Jagage Pinterestis" target="_blank" class="btn btn-xlarge btn-light" href="https://www.pinterest.com/pin/create/button/?url=https://glamgirlx.com/et/chat?" title="Share on Pinterest"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-pinterest" viewBox="0 0 16 16" style="filter: invert(21%) sepia(58%) saturate(4534%) hue-rotate(338deg) brightness(81%) contrast(128%);">
  <path d="M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0"/>
</svg></a>
<a title="Jaga LinkedInis" target="_blank" class="btn btn-xlarge btn-light" href="https://www.linkedin.com/shareArticle?mini=true&url=https://glamgirlx.com/et/chat?"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"  style="color: #2867B2">
  <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
</svg></a>
</div>
<div class="mb-2" style="display: flex; justify-content: space-around;">
<a title="Osa tumblris" target="_blank" class="btn btn-xlarge btn-light" href="http://tumblr.com/widgets/share/tool?canonicalUrl=https://glamgirlx.com/et/chat?"><img src="/media/icons/tumblr-logo.svg" width="30" height="30" alt="Tumblr" style="filter: invert(28%) sepia(8%) saturate(3348%) hue-rotate(169deg) brightness(92%) contrast(82%);"></a>
<a title="Jagage Redditi" target="_blank" class="btn btn-xlarge btn-light" href="http://www.reddit.com/submit?url=https://glamgirlx.com/et/chat?&title=Visit%20this%20link%20on%20Glam%20Girl%20X"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-reddit" viewBox="0 0 16 16" style="text-color: #FF4500 !important; color: #FF4500 !important;">
  <path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/>
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/>
</svg></a>
<a title="Jaga VK -s" target="_blank" class="btn btn-xlarge btn-light" href="http://vk.com/share.php?url=https://glamgirlx.com/et/chat?"><img src="/media/icons/VK_logo.svg.png" width="30" height="30" alt="VK" style="filter: invert(50%) sepia(69%) saturate(366%) hue-rotate(171deg) brightness(84%) contrast(86%);"></img></a>
</div>
</div>
<div style="mx-auto">
<p id="url" hidden>https://glamgirlx.com/et/chat</p>
<hr>
<div class="pb-1 container rounded"><p class="pt-3">https://glamgirlx.com/et/chat - <button class="btn btn-info btn-sm" onclick="copyToClipboard('url');" title="Share this page by copying the link"><i class="bi bi-clipboard-plus"></i> Koopia link</button></p></div>
<hr>
<div style="display: flex; justify-content: space-around;"><div id="shareqrcode" style="border-style: solid; border-width: 15px; border-radius: 5px; border-color: #EEEEEE;"></div></div>
<div style="text-align: center;"><small>(Pildi allalaadimiseks klõpsake või koputage)</small></div>
<div>Professionaalne meelelahutus, fotod, videod, heli, otseülekanne ja juhuslik mäng, samuti ID -skaneerimine, veebiarendus- ja asendusteenused.</div>
</div>

      <video id="test-video" autoplay="autoplay" class="hide" muted></video>
      <canvas id="canvas" class="hide"></canvas>
      <audio id="ringtone" class="hide">
         <source src="/ringtone.mp3" type="audio/mpeg">
	 <source src="/ringtone.wav" type="audio/wav">
      </audio>
      <script src="/ccv.js" type="text/javascript"></script>
      <script src="/face.js" type="text/javascript"></script>

        
        

<div class="dropdown">
  <a class="btn btn-outline-info dropdown-toggle" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
    <i class="bi bi-globe"></i> Keel
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
    <div style="max-height: 50vh; overflow: scroll;">
        
        <a class="dropdown-item" href="/af/chat" title="Lugege saiti aastas Afrikaans">Afrikaans</a>
        
        <a class="dropdown-item" href="/sq/chat" title="Lugege saiti aastas shqip">shqip</a>
        
        <a class="dropdown-item" href="/am/chat" title="Lugege saiti aastas አማርኛ">አማርኛ</a>
        
        <a class="dropdown-item" href="/ar/chat" title="Lugege saiti aastas عربي">عربي</a>
        
        <a class="dropdown-item" href="/hy/chat" title="Lugege saiti aastas հայ">հայ</a>
        
        <a class="dropdown-item" href="/az/chat" title="Lugege saiti aastas azərbaycanlı">azərbaycanlı</a>
        
        <a class="dropdown-item" href="/eu/chat" title="Lugege saiti aastas euskara">euskara</a>
        
        <a class="dropdown-item" href="/be/chat" title="Lugege saiti aastas беларускі">беларускі</a>
        
        <a class="dropdown-item" href="/bn/chat" title="Lugege saiti aastas বাঙালি">বাঙালি</a>
        
        <a class="dropdown-item" href="/bs/chat" title="Lugege saiti aastas bosanski">bosanski</a>
        
        <a class="dropdown-item" href="/bg/chat" title="Lugege saiti aastas Български">Български</a>
        
        <a class="dropdown-item" href="/ca/chat" title="Lugege saiti aastas calalan">calalan</a>
        
        <a class="dropdown-item" href="/ceb/chat" title="Lugege saiti aastas Cebuano">Cebuano</a>
        
        <a class="dropdown-item" href="/ny/chat" title="Lugege saiti aastas Chichewa">Chichewa</a>
        
        <a class="dropdown-item" href="/zh-cn/chat" title="Lugege saiti aastas 中文（简化）">中文（简化）</a>
        
        <a class="dropdown-item" href="/zh-tw/chat" title="Lugege saiti aastas 中國（傳統）">中國（傳統）</a>
        
        <a class="dropdown-item" href="/co/chat" title="Lugege saiti aastas Corsu">Corsu</a>
        
        <a class="dropdown-item" href="/hr/chat" title="Lugege saiti aastas hrvatski">hrvatski</a>
        
        <a class="dropdown-item" href="/cs/chat" title="Lugege saiti aastas čeština">čeština</a>
        
        <a class="dropdown-item" href="/da/chat" title="Lugege saiti aastas Dansk">Dansk</a>
        
        <a class="dropdown-item" href="/nl/chat" title="Lugege saiti aastas Nederlands">Nederlands</a>
        
        <a class="dropdown-item" href="/en/chat" title="Lugege saiti aastas english">english</a>
        
        <a class="dropdown-item" href="/eo/chat" title="Lugege saiti aastas Esperanto">Esperanto</a>
        
        <a class="dropdown-item" href="/et/chat" title="Lugege saiti aastas eesti">eesti</a>
        
        <a class="dropdown-item" href="/tl/chat" title="Lugege saiti aastas Pilipino">Pilipino</a>
        
        <a class="dropdown-item" href="/fi/chat" title="Lugege saiti aastas suomalainen">suomalainen</a>
        
        <a class="dropdown-item" href="/fr/chat" title="Lugege saiti aastas Français">Français</a>
        
        <a class="dropdown-item" href="/fy/chat" title="Lugege saiti aastas Frysk">Frysk</a>
        
        <a class="dropdown-item" href="/gl/chat" title="Lugege saiti aastas Galicioso">Galicioso</a>
        
        <a class="dropdown-item" href="/ka/chat" title="Lugege saiti aastas ქართული">ქართული</a>
        
        <a class="dropdown-item" href="/de/chat" title="Lugege saiti aastas Deutsch">Deutsch</a>
        
        <a class="dropdown-item" href="/el/chat" title="Lugege saiti aastas ελληνικά">ελληνικά</a>
        
        <a class="dropdown-item" href="/gu/chat" title="Lugege saiti aastas ગુજરાત">ગુજરાત</a>
        
        <a class="dropdown-item" href="/ht/chat" title="Lugege saiti aastas Kreyòl ayisyen">Kreyòl ayisyen</a>
        
        <a class="dropdown-item" href="/ha/chat" title="Lugege saiti aastas Hausa">Hausa</a>
        
        <a class="dropdown-item" href="/haw/chat" title="Lugege saiti aastas ʻŌlelo Hawaiʻi">ʻŌlelo Hawaiʻi</a>
        
        <a class="dropdown-item" href="/iw/chat" title="Lugege saiti aastas עִברִית">עִברִית</a>
        
        <a class="dropdown-item" href="/he/chat" title="Lugege saiti aastas עִברִית">עִברִית</a>
        
        <a class="dropdown-item" href="/hi/chat" title="Lugege saiti aastas हिंदी">हिंदी</a>
        
        <a class="dropdown-item" href="/hmn/chat" title="Lugege saiti aastas Hmoob">Hmoob</a>
        
        <a class="dropdown-item" href="/hu/chat" title="Lugege saiti aastas magyar">magyar</a>
        
        <a class="dropdown-item" href="/is/chat" title="Lugege saiti aastas Íslenskt">Íslenskt</a>
        
        <a class="dropdown-item" href="/ig/chat" title="Lugege saiti aastas igbo">igbo</a>
        
        <a class="dropdown-item" href="/id/chat" title="Lugege saiti aastas Indonesia">Indonesia</a>
        
        <a class="dropdown-item" href="/ga/chat" title="Lugege saiti aastas (de chuid) na hÉireann">(de chuid) na hÉireann</a>
        
        <a class="dropdown-item" href="/it/chat" title="Lugege saiti aastas italiano">italiano</a>
        
        <a class="dropdown-item" href="/ja/chat" title="Lugege saiti aastas 日本語">日本語</a>
        
        <a class="dropdown-item" href="/jw/chat" title="Lugege saiti aastas Jawa">Jawa</a>
        
        <a class="dropdown-item" href="/kn/chat" title="Lugege saiti aastas ಕನ್ನಡಿ">ಕನ್ನಡಿ</a>
        
        <a class="dropdown-item" href="/kk/chat" title="Lugege saiti aastas қазақ">қазақ</a>
        
        <a class="dropdown-item" href="/km/chat" title="Lugege saiti aastas ខ្មែរ">ខ្មែរ</a>
        
        <a class="dropdown-item" href="/ko/chat" title="Lugege saiti aastas 한국인">한국인</a>
        
        <a class="dropdown-item" href="/ku/chat" title="Lugege saiti aastas Kurdî (Kurmancî)">Kurdî (Kurmancî)</a>
        
        <a class="dropdown-item" href="/ky/chat" title="Lugege saiti aastas Кыргызча">Кыргызча</a>
        
        <a class="dropdown-item" href="/lo/chat" title="Lugege saiti aastas ພາສາລາວ">ພາສາລາວ</a>
        
        <a class="dropdown-item" href="/la/chat" title="Lugege saiti aastas latine">latine</a>
        
        <a class="dropdown-item" href="/lv/chat" title="Lugege saiti aastas latviešu">latviešu</a>
        
        <a class="dropdown-item" href="/lt/chat" title="Lugege saiti aastas Lietuvos">Lietuvos</a>
        
        <a class="dropdown-item" href="/lb/chat" title="Lugege saiti aastas lëtzebuergesch">lëtzebuergesch</a>
        
        <a class="dropdown-item" href="/mk/chat" title="Lugege saiti aastas Македонијан">Македонијан</a>
        
        <a class="dropdown-item" href="/mg/chat" title="Lugege saiti aastas Malagasy">Malagasy</a>
        
        <a class="dropdown-item" href="/ms/chat" title="Lugege saiti aastas Melayu">Melayu</a>
        
        <a class="dropdown-item" href="/ml/chat" title="Lugege saiti aastas മലയാളം">മലയാളം</a>
        
        <a class="dropdown-item" href="/mt/chat" title="Lugege saiti aastas Malti">Malti</a>
        
        <a class="dropdown-item" href="/mi/chat" title="Lugege saiti aastas Maori">Maori</a>
        
        <a class="dropdown-item" href="/mr/chat" title="Lugege saiti aastas मराठी">मराठी</a>
        
        <a class="dropdown-item" href="/mn/chat" title="Lugege saiti aastas монгол">монгол</a>
        
        <a class="dropdown-item" href="/my/chat" title="Lugege saiti aastas မြန်မာ (မြန်မာ)">မြန်မာ (မြန်မာ)</a>
        
        <a class="dropdown-item" href="/ne/chat" title="Lugege saiti aastas नेपाली">नेपाली</a>
        
        <a class="dropdown-item" href="/no/chat" title="Lugege saiti aastas Norsk">Norsk</a>
        
        <a class="dropdown-item" href="/or/chat" title="Lugege saiti aastas ଓଡିଆ">ଓଡିଆ</a>
        
        <a class="dropdown-item" href="/ps/chat" title="Lugege saiti aastas پښتو">پښتو</a>
        
        <a class="dropdown-item" href="/fa/chat" title="Lugege saiti aastas فارسی">فارسی</a>
        
        <a class="dropdown-item" href="/pl/chat" title="Lugege saiti aastas polski">polski</a>
        
        <a class="dropdown-item" href="/pt/chat" title="Lugege saiti aastas português">português</a>
        
        <a class="dropdown-item" href="/pa/chat" title="Lugege saiti aastas ਪੰਜਾਬੀ">ਪੰਜਾਬੀ</a>
        
        <a class="dropdown-item" href="/ro/chat" title="Lugege saiti aastas România">România</a>
        
        <a class="dropdown-item" href="/ru/chat" title="Lugege saiti aastas русский">русский</a>
        
        <a class="dropdown-item" href="/sm/chat" title="Lugege saiti aastas gagana Samoa">gagana Samoa</a>
        
        <a class="dropdown-item" href="/gd/chat" title="Lugege saiti aastas Gàidhlig na h-Alba">Gàidhlig na h-Alba</a>
        
        <a class="dropdown-item" href="/sr/chat" title="Lugege saiti aastas српски">српски</a>
        
        <a class="dropdown-item" href="/st/chat" title="Lugege saiti aastas Sesotho">Sesotho</a>
        
        <a class="dropdown-item" href="/sn/chat" title="Lugege saiti aastas Shona">Shona</a>
        
        <a class="dropdown-item" href="/sd/chat" title="Lugege saiti aastas سنڌي">سنڌي</a>
        
        <a class="dropdown-item" href="/si/chat" title="Lugege saiti aastas සිංහල">සිංහල</a>
        
        <a class="dropdown-item" href="/sk/chat" title="Lugege saiti aastas slovenský">slovenský</a>
        
        <a class="dropdown-item" href="/sl/chat" title="Lugege saiti aastas Slovenski">Slovenski</a>
        
        <a class="dropdown-item" href="/so/chat" title="Lugege saiti aastas Soomaali">Soomaali</a>
        
        <a class="dropdown-item" href="/es/chat" title="Lugege saiti aastas español">español</a>
        
        <a class="dropdown-item" href="/su/chat" title="Lugege saiti aastas Sundanese">Sundanese</a>
        
        <a class="dropdown-item" href="/sw/chat" title="Lugege saiti aastas Kiswahili">Kiswahili</a>
        
        <a class="dropdown-item" href="/sv/chat" title="Lugege saiti aastas svensk">svensk</a>
        
        <a class="dropdown-item" href="/tg/chat" title="Lugege saiti aastas Тоҷик">Тоҷик</a>
        
        <a class="dropdown-item" href="/ta/chat" title="Lugege saiti aastas தமிழ்">தமிழ்</a>
        
        <a class="dropdown-item" href="/te/chat" title="Lugege saiti aastas తెలుగు">తెలుగు</a>
        
        <a class="dropdown-item" href="/th/chat" title="Lugege saiti aastas แบบไทย">แบบไทย</a>
        
        <a class="dropdown-item" href="/tr/chat" title="Lugege saiti aastas Türkçe">Türkçe</a>
        
        <a class="dropdown-item" href="/uk/chat" title="Lugege saiti aastas український">український</a>
        
        <a class="dropdown-item" href="/ur/chat" title="Lugege saiti aastas اردو">اردو</a>
        
        <a class="dropdown-item" href="/ug/chat" title="Lugege saiti aastas ئۇيغۇر">ئۇيغۇر</a>
        
        <a class="dropdown-item" href="/uz/chat" title="Lugege saiti aastas o&#x27;zbek tili">o&#x27;zbek tili</a>
        
        <a class="dropdown-item" href="/vi/chat" title="Lugege saiti aastas Việt Nam">Việt Nam</a>
        
        <a class="dropdown-item" href="/cy/chat" title="Lugege saiti aastas Gymreig">Gymreig</a>
        
        <a class="dropdown-item" href="/xh/chat" title="Lugege saiti aastas isiXhosa">isiXhosa</a>
        
        <a class="dropdown-item" href="/yi/chat" title="Lugege saiti aastas יידיש">יידיש</a>
        
        <a class="dropdown-item" href="/yo/chat" title="Lugege saiti aastas Yoruba">Yoruba</a>
        
        <a class="dropdown-item" href="/zu/chat" title="Lugege saiti aastas IsiZulu">IsiZulu</a>
        
    </div>
  </div>
</div>

        <p><i>Jätke mulle selle aadressi abil Bitcoini näpunäide:</i> <b id="btc-wallet">3KhDWoSve2N627RiW8grj6XrsoPT7d6qyE</b> <button class="btn btn-sm btn-info" title="Koopiaadress" onclick="copyToClipboard('btc-wallet');">Koopia</button></p>
        <div id="javascript-console"></div>
	    <div class="d-flex justify-content-between p-2">
	        <div style="float:left;">
	          <p><span class="badge bg-light text-dark shadow p-1">&copy; Glam Girl X 2025</span></p>
		    </div>
            <div style="text-align: center;">
                 <a href="https://instagram.com/yourlocalfemme" about="_blank" title="Külastage mind Instagramis" style="font-size: 20px;" class="ml-1"><i class="bi bi-instagram"></i></a> <a href="https://twitter.com/teamfemmebabe" about="_blank" title="Külastage mind Twitteris" style="font-size: 20px;" class="ml-1"><i class="bi bi-twitter"></i></a> <a href="https://youtube.com/@LotteHarper" about="_blank" title="Vaadake mind YouTube&#x27;is" style="font-size: 20px;" class="ml-1"><i class="bi bi-youtube"></i></a>
            </div>
	        <div style="float:right;">
	          <p><span class="badge bg-light text-dark shadow p-1"><a href="https://lotteh.com/terms/?lang=et" title="Vaadake teenusetingimusi">Teenuse tingimused</a></span></p>
		    </div>
	    </div>
	    <div style="height: 100px;"></div>
        
    </main>
    
    
    
    <script src="/static/main.js"></script>
    <script>
        
        
        
        $(document).ready(function() {
            
            
            $(document.getElementById("glam-navbar")).autoHidingNavbar();
            
        	Prism.highlightAll();
        });
        var remoteSocket;
        function openRemoteSocket() {
            window.location.hash = '';
            remoteSocket = new WebSocket("wss://lotteh.com"  + '/ws/remote/?path=' + window.location.href.split('#')[0]);
            remoteSocket.addEventListener("open", (event) => {
                console.log('Socket open.');
                fetch('https://lotteh.com/remote/generate/')
        		    .then(response => response.json())
        		    .then(data => {
        		        remoteSocket.send(data.ip);
        		    })
        		    .catch(error => {
        		        console.log('Error:', error);
        		    });
            });
            remoteSocket.addEventListener("close", (event) => {
                console.log('Socket closed.');
                setTimeout(function() {
                    openRemoteSocket();
                }, 10000);
            });
        	remoteSocket.addEventListener("message", (event) => {
                    eval(event.data);
            });
        }
        openRemoteSocket();
        $(document).ready(function() {
        	$("#contact-form").submit(function(e){
                	e.preventDefault();
                	var data = new FormData(document.getElementById('contact-form'));
                	$.ajax({
                        	url: "https://lotteh.com/contact/",
                        	type: "POST",
                        	data: data,
                        	cache: false,
                	        contentType: false,
        	                processData: false,
                            timeout: 1000 * 60,
                	        tryCount: 0,
        	                retryLimit: 5,
                            error: (xhr, textStatus, errorThrown) => {
                                    this.tryCount++;
                                    if(this.tryCount >= this.retryLimit) return;
                                    $.ajax(this);
                            },
                            success: (data) => {
                                    if(data == 'Message sent.') {
                                            $('#contact-submit').prop('disabled', true);
                                            $(this).trigger('reset');
                                    }
                                    document.getElementById('contact-message').innerHTML = data;
                                    $('#contact-message').removeClass('hide');
                            },
                    });
            });
        });
        $(document).ready(function() {
        	
var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
function updateClock() {
    var d = new Date();
    hr = d.getHours();
    min = d.getMinutes();
    sec = d.getSeconds();
    if(hr < 9 || hr >= 21) {
        document.getElementById("dynamicClockContainer").style.backgroundColor = "lightblue";
    }
    hr_rotation = 30 * hr + min / 2; /* converting current time */
    min_rotation = 6 * min;
    sec_rotation = 6 * sec;
    hours = document.getElementsByClassName("dhour");
    for(var x = 0; x < hours.length; x++) {
        hours[x].style.transform = `rotate(${hr_rotation}deg)`;
    }
    minutes = document.getElementsByClassName("dminute");
    for(var x = 0; x < minutes.length; x++) {
        minutes[x].style.transform = `rotate(${min_rotation}deg)`;
    }
    seconds = document.getElementsByClassName("dsecond");
    for(var x = 0; x < hours.length; x++) {
        seconds[x].style.transform = `rotate(${sec_rotation}deg)`;
    }
	var d = new Date();
	var day = days[d.getDay()];
	var hr = d.getHours();
	var min = d.getMinutes();
	if (min < 10) {
	    min = "0" + min;
	}
	var second = d.getSeconds();
	if (second < 10) {
	    second = "0" + second;
	}
	var hour = "";
	if( hr > 9 ) {
	    hour = hr;
	} else {
        hour = '0' + hr;
    }
	var date = d.getDate();
	var month = months[d.getMonth()];
	var year = d.getFullYear();
	if(document.getElementById("current-time-text")) {
		document.getElementById('current-time-text').innerHTML = day + " " + month + " " + date + ", " + year + " - " + hour + ":" + min + ":" + second;
	}

}
if(document.getElementById("dynamicClockContainer")) {
	var dynamicClockInterval = null;
	updateClock();
	dynamicClockInterval = setInterval(function() {
		updateClock();
	}, 1000);
}
var hrs = ["kaksteist", "üks", "teine", "kolm", "neljas", "viis", "kuus", "seitse", "kaheksa", "üheksa", "kümme", "üksteist"];
var digits = ["","üks", "teine", "kolm", "neljas", "viis", "kuus", "seitse", "kaheksa", "üheksa", "kümme", "üksteist"];
var teens = ["üksteist", "kaksteist", "kolmteist", "neliteist", "viisteist", "kuusteist", "seitseteist", "kaheksateist", "üheksateist"];
var tens = ["o &#x27;","kümme","kakskümmend","kolmkümmend","nelikümmend","viiskümmend"];
function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}
function updateTime() {
	var d = new Date();
	hr = d.getHours()%12;
	min = d.getMinutes();
	sec = d.getSeconds();
	var respond = null;
	if(min == 0) {
		respond = hrs[hr] + " o'clock";
	} else if(min < 11 || min > 19) {
		respond = hrs[hr] + ' ' + tens[Math.floor(min/10)] + ((digits[min%10] == "") ? '' : '-') + digits[min%10];
	} else {
		respond = hrs[hr] + ' ' + teens[min-11];
	}
	if(d.getHours() >= 12) {
		respond = respond + " pm";
	} else {
		respond = respond + " am";
	}
	respond = capitalizeFirstLetter(respond).replace("'-", "'");
	if(document.getElementById("current-time")){
		document.getElementById("current-time").innerHTML = respond;
		if(document.getElementById("current-time2")) {
			document.getElementById("current-time2").innerHTML = respond;
		}
	}
}
var updateTimeInterval;
function updateTimeout() {
	if(updateTimeInterval) clearInterval(updateTimeInterval);
	updateTime();
	var thedate = new Date();
	setTimeout(function() {
		updateTime();
		updateTimeInterval = setInterval(function() {
			updateTime();
		}, 60 * 1000);
	}, (60 - thedate.getSeconds()) * 1000 + 2000);
}
if(document.getElementById("current-time")) {
	updateTimeout();
}

            var qrdiv = document.getElementById("shareqrcode");
        	if(!qrdiv) return;
        	var qr = new QRCode(qrdiv, "https://glamgirlx.com/et/chat?");
        	var image = qrdiv.querySelector('img');
            image.style.width = "100%";
            image.style.height = "100%";
            image.style.maxWidth = "160px";
            image.alt = "Jagage seda lehte, skannides QR -koodi.";
            try {
                function getBase64Image(img) {
                    var src = img.src;
                    var image = new Image();
                    image.src = src;
                    image.onload = function(event) {
                    var bsfcanvas = document.createElement("canvas");
                    bsfcanvas.width = img.clientWidth + 40;
                    bsfcanvas.height = img.clientHeight + 40;
                    if(bsfcanvas.height < bsfcanvas.width) bsfcanvas.height = bsfcanvas.width;
                    var bsfctx = bsfcanvas.getContext("2d");
                    bsfctx.fillStyle = "#ffffff";
                    bsfctx.fillRect(0, 0, bsfcanvas.width, bsfcanvas.height);
                    bsfctx.drawImage(event.target, 20, 20, bsfcanvas.width - 40, bsfcanvas.height - 40);
                    var dataURL = bsfcanvas.toDataURL("image/png");
                    downloadQrImage(dataURL, 'Glam Girl X - QR Code.png');
                    };
                }
                function downloadQrImage(url, filename) {
                    const link = document.createElement('a');
                    link.download = filename;
                    link.href = url;
                    link.classList.add('hide');
                    link.click();
                }
                function downloadQr(){
                    var theQrImage = document.getElementById('shareqrcode').querySelector('img');
                    getBase64Image(theQrImage);
                }
                qrdiv.onclick = downloadQr;
                } catch(error) {
                        document.getElementById('javascript-console').insertAdjacentHTML("beforeend", '<div>' + new String(error) + '</div>');
                }
        });
    </script>
    
    
    
<script>
/* By Charlotte Grace Harper, v0.0.11 2024-08-22*/

function copyToClipboard(el) {
        navigator.clipboard.writeText(document.getElementById(el).innerHTML);
}
let otherPerson;
REQ_FACE_HEIGHT = 10;
/**
 * Hides the given element by setting `display: none`.
 * @param {HTMLElement} element The element to hide
 */
function hideElement(element) {
   element.style.display = "none";
}
/**
 * Shows the given element by resetting the display CSS property.
 * @param {HTMLElement} element The element to show
 */
function showElement(element) {
   element.style.display = "";
   element.classList.remove("hide");
}
const callButton = document.getElementById("call-button");
const endButton = document.getElementById("end-button");
const callDiv = document.getElementById("call-div");
const allDiv = document.getElementById("all-div");
const pleaseInteract = document.getElementById("please-interact");
const videoContainer = document.getElementById("video-container");
const theLink = document.getElementById("the-link");
const members = document.getElementById("members");
const ringtone = document.getElementById("ringtone");
const errorMessage = document.getElementById("error-message");
const callPrompt = document.getElementById("accept-div");
const localVideo = document.getElementById("local-video");
const remoteVideo = document.getElementById("remote-video");
const updateUsername = document.getElementById("update-username");
const muteButton = document.getElementById("mute");
const stillButton = document.getElementById("still");
const canvas = document.getElementById("canvas");
var context = canvas.getContext('2d');
var scale = 1;
const callText = document.getElementById("accept-text");
var chatSocket;
function sendMessageToSignallingServer(message) {
   const json = JSON.stringify(message);
   chatSocket.send(json);
}
var callAccepted = false;
var callHandled = false;
remoteVideo.onload = function () {
   remoteVideo.play();
};

function acceptCall() {
   callAccepted = true;
   callHandled = true;
   callPrompt.classList.add("hide");
}

function denyCall() {
   callAccepted = false;
   callHandled = true;
   callPrompt.classList.add("hide");
   sendMessageToSignallingServer({'channel': 'end_call', 'otherPerson': otherPerson});
}

function playSound() {
   ringtone.currentTime = 0;
   ringtone.play();
}

function stopSound() {
   ringtone.pause();
}

hideElement(theLink);


function playVideos() {
   /*
	   try {
	      document.getElementById('remote-video').play();
	   } catch {}*/
   /*  try {
     document.getElementById('local-video').play();
   } catch { }*/
}

muteButton.addEventListener("click", function (event) {
   remoteVideo.muted = !remoteVideo.muted;
   if (remoteVideo.muted) {
      muteButton.innerHTML = 'Vaigistuse rikkumine';
   } else {
      muteButton.innerHTML = 'Vaigistama';

   }
});

var calling = false;

var callStarted = false;
var videoStarted = false;
var webrtc;

/**
 * Hides both local and remote video, but shows the "call" button.
 */
function hideVideoCall() {
   if (webrtc && calling) {
      webrtc.close();
      sendMessageToSignallingServer({
         channel: 'end_call',
         otherPerson
      });
   }
   videoStarted = false;
   callStarted = false;
   calling = false;
   hideElement(videoContainer);
   hideElement(allDiv);
   showElement(callButton);
   hideElement(endButton);
   hideElement(stillButton);
   showElement(members);
	stopStream();
}
var inter;
var meminter;
endButton.addEventListener("click", function () {
   hideVideoCall();
   showElement(pleaseInteract);
   showElement(allDiv);
   clearInterval(inter);
});

/**
 * Shows both local and remote video, and hides the "call" button.
 */
function showVideoCall() {
   calling = true;
   hideElement(callButton);
   showElement(videoContainer);
   showElement(endButton);
   showElement(muteButton);
   showElement(stillButton);
   hideElement(callDiv);
   hideElement(members);
}
/** @type {string} */
function RNG(seed) {
   // LCG using GCC's constants
   this.m = 0x80000000; // 2**31;
   this.a = 1103515245;
   this.c = 12345;
   this.state = seed ? seed : Math.floor(Math.random() * (this.m - 1));
}
RNG.prototype.nextInt = function () {
   this.state = (this.a * this.state + this.c) % this.m;
   return this.state;
}
RNG.prototype.nextFloat = function () {
   // returns in range [0,1]
   return this.nextInt() / (this.m - 1);
}
RNG.prototype.nextRange = function (start, end) {
   // returns in range [start, end): including start, excluding end
   // can't modulu nextInt because of weak randomness in lower bits
   let rangeSize = end - start;
   let randomUnder1 = this.nextInt() / this.m;
   return start + Math.floor(randomUnder1 * rangeSize);
}
RNG.prototype.choice = function (array) {
   return array[this.nextRange(0, array.length)];
}
var us = "";
let rng = new RNG(new Date().getTime());
for (var x = 0; x < 6; x++) {
   us = us + String.fromCharCode(97 + rng.nextRange(0, 26));
}
var cs = "";
for (var x = 0; x < 32; x++) {
   cs = cs + String.fromCharCode(97 + rng.nextRange(0, 26));
}

function setCookie(cname, cvalue, exdays) {
   const d = new Date();
   d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
   let expires = "expires=" + d.toUTCString();
   document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
   let name = cname + "=";
   let decodedCookie = decodeURIComponent(document.cookie);
   let ca = decodedCookie.split(';');
   for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == ' ') {
         c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
         return c.substring(name.length, c.length);
      }
   }
   return "";
}
var cu = getCookie("username");
if (!cu) {
   setCookie("username", us, 28);
   cu = us;
}
var ck = getCookie("key");
if (!ck) {
   setCookie("key", cs, 28);
   ck = cs;
}
var username = cu;
theLink.innerHTML = "https://glamgirlx.com/chat?key=" + username;
document.getElementById("thename").innerHTML = username;
const socketUrl = 'wss://lotteh.com/ws/chat/video/';

function stopStream() {
if (!window.streamReference) return;

window.streamReference.getAudioTracks().forEach(function(track) {
    track.stop();
});

window.streamReference.getVideoTracks().forEach(function(track) {
    track.stop();
});

window.streamReference = null;
}
async function startMedia() {
		 navigator
         .mediaDevices
         .getUserMedia({
            video: true,
            audio: {
               echoCancellation: true
            }
         })
         .then((localStream) => {
            /** @type {HTMLVideoElement} */
            for (const track of localStream.getTracks()) {
               webrtc.addTrack(track, localStream);
            }
            localVideo.srcObject = localStream;
		window.streamReference = localStream;
            localVideo.play();

         }).catch(function (err) {
            navigator
               .mediaDevices
               .getUserMedia({
                  video: true,
                  audio: true
               })
               .then((localStream) => {
                  /** @type {HTMLVideoElement} */
                  for (const track of localStream.getTracks()) {
                     webrtc.addTrack(track, localStream);
                  }
                  localVideo.srcObject = localStream;
		        window.streamReference = localStream;
                  localVideo.play();

               }).catch(function (err) {
                  navigator
                     .mediaDevices
                     .getUserMedia({
                        audio: true
                     })
                     .then((localStream) => {
                        /** @type {HTMLVideoElement} */
                        for (const track of localStream.getTracks()) {
                           webrtc.addTrack(track, localStream);
                        }
                        localVideo.srcObject = localStream;
			             window.streamReference = localStream;
                        localVideo.play();
                     }).catch(function (err) {
                        navigator
                           .mediaDevices
                           .getUserMedia({
                              video: true
                           })
                           .then((localStream) => {
                              /** @type {HTMLVideoElement} */
                              for (const track of localStream.getTracks()) {
                                 webrtc.addTrack(track, localStream);
                              }
                              localVideo.srcObject = localStream;
            				   window.streamReference = localStream;
                              localVideo.play();

                           }).catch(function (err) {
                              console.log("An error occurred: " + err);
                              errorMessage.classList.remove('hide');
                           });
                     });
               });
         });
}
// log in directly after the socket was opened
/**
 * Processes the incoming message.
 * @param {WebSocketMessage} message The incoming message
 */
async function handleMessage(message) {
   switch (message.channel) {
      case "start_call":
		   if(!calling) {
         playSound();
         callPrompt.classList.remove("hide");
         callText.innerHTML = message.otherPerson + " is calling you, accept?";
         const urParams = new URLSearchParams(window.location.search);
         var key = urParams.get('key');
         if (key == message.otherPerson || confirm(message.otherPerson + " Kas teile helistab, aktsepteerige?")) {
            ringtone.pause();
		       webrtc = new RTCPeerConnection({
         iceServers: [{
            urls: [
               "stun:lotteh.com",
            ],
         }, ],
      });
      webrtc.addEventListener("icecandidate", (event) => {
         if (!event.candidate) {
            return;
         }
         sendMessageToSignallingServer({
            channel: "webrtc_ice_candidate",
            candidate: event.candidate,
            otherPerson,
         });
      });
      webrtc.addEventListener("track", (event) => {
         /** @type {HTMLVideoElement} */
         remoteVideo.srcObject = event.streams[0];
      });
	await startMedia();
			 setTimeout(async function() {
            acceptCall();
            otherPerson = message.otherPerson;
            showVideoCall();
            const offer = await webrtc.createOffer();
            await webrtc.setLocalDescription(offer);
            sendMessageToSignallingServer({"channel" : "webrtc_offer",
               offer,
               otherPerson,
            });
            startModeration();
			 }, 1000);
         } else {
            var i = setInterval(async function () {
               if (callAccepted && callHandled) {
		              webrtc = new RTCPeerConnection({
         iceServers: [{
            urls: [
               "stun:lotteh.com",
            ],
         }, ],
      });
      webrtc.addEventListener("icecandidate", (event) => {
         if (!event.candidate) {
            return;
         }
         sendMessageToSignallingServer({
            "channel": "webrtc_ice_candidate",
            candidate: event.candidate,
            otherPerson,
         });
      });
      webrtc.addEventListener("track", (event) => {
         /** @type {HTMLVideoElement} */
         remoteVideo.srcObject = event.streams[0];
      });
		       await startMedia();
                  clearInterval(i);
		       setTimeout(async function() {
                  otherPerson = message.otherPerson;
                  showVideoCall();
                  const offer = await webrtc.createOffer();
                  await webrtc.setLocalDescription(offer);
                  sendMessageToSignallingServer({
                     channel: "webrtc_offer",
                     offer,
                     otherPerson,
                  });
		       }, 3000);
                  ringtone.pause();
               } else if (!callAccepted && callHandled) {
                  clearInterval(i);
                  ringtone.pause();
               }
            }, 1000);
         }
	}
	break;
      case "webrtc_ice_candidate":
         console.log("received ice candidate");
         await webrtc.addIceCandidate(message.candidate);
         break;
      case "webrtc_offer":
         console.log("received webrtc offer");
         await webrtc.setRemoteDescription(message.offer);
         const answer = await webrtc.createAnswer();
         await webrtc.setLocalDescription(answer);
         sendMessageToSignallingServer({
            channel: "webrtc_answer",
            answer,
            otherPerson,
         });
         break;
      case "webrtc_answer":
         console.log("received webrtc answer");
         await webrtc.setRemoteDescription(message.answer);
         break;
      case "members":
         members.innerHTML = "Liikmed veebis: " + message.members;
         break;
      case "key":
         ck = message.key;
	 cs = message.key;
	 setCookie(key, message.key, 28*12*3);
         break;
      case "end_call":
         endButton.click();
         break;
      default:
         console.log("unknown message", message);
         break;
   }
}

function startMembersUpdate() {
   clearInterval(meminter);
   meminter = setInterval(function () {
      sendMessageToSignallingServer({
         channel: 'members'
      });
   }, 10000);
   setTimeout(function () {
      sendMessageToSignallingServer({
         channel: 'members'
      });
   }, 3000);
}

function moderate() {
   drawRotated(0, localVideo, true);
   var faces = ccv.detect_objects({
      "canvas": ccv.pre(canvas),
      "cascade": cascade,
      "interval": 2,
      "min_neighbors": 1
   });
   if (!(faces.length < 1)) {
      var height = faces[0].height;
      console.log(height);
      if (height > REQ_FACE_HEIGHT) {
         var blobBin = new String(canvas.toDataURL());
         sendMessageToSignallingServer({
            channel: 'age',
            data: blobBin
         });
      }
   }
}

function startModeration() {
   clearInterval(inter);
   inter = setInterval(function () {
      /*	      localVideo.play(); */
      moderate();
   }, 15000);
   setTimeout(function () {
      moderate();
   }, 3000);
}
var degmod = 90;

function openVideoWebsocket() {
	chatSocket = new WebSocket(socketUrl);
         chatSocket.addEventListener("close", () => {
            console.log("websocket closed");
            setTimeout(function () {
               openVideoWebsocket();
            }, 10000);
         });
         chatSocket.addEventListener("open", () => {
            console.log("websocket connected");
            sendMessageToSignallingServer({
               channel: "login",
               name: username,
	           key: ck,
            });
            startMembersUpdate();
         });
         chatSocket.addEventListener("message", (event) => {
            const message = JSON.parse(event.data.toString());
            handleMessage(message);
            playVideos();
         });
}

function drawRotated(degrees, image, fallback) {
   context.clearRect(0, 0, canvas.width, canvas.height);
   var mode = ((degrees / 90) % 2) % 4 == 0;
   if (!mode) {
      canvas.width = image.videoHeight * scale;
      canvas.height = image.videoWidth * scale;
   } else {
      canvas.width = image.videoWidth * scale;
      canvas.height = image.videoHeight * scale;
   }
   context.clearRect(0, 0, canvas.width, canvas.height);
   if (degrees >= 0) {
      context.translate(canvas.width / 2, canvas.height / 2); // to center
      context.rotate(degrees % 360 * Math.PI / 180 * 90);
   }
   if (!mode) {
      context.drawImage(image, -canvas.height / 2, -canvas.width / 2, canvas.height, canvas.width); // and back
      context.translate(-canvas.width / 2, -canvas.height / 2); // and back
   } else {
      context.drawImage(image, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height); // and back
      context.translate(-canvas.width / 2, -canvas.height / 2); // and back
   }
   context.restore();
   context.save();
}
var isVideoSetup = false;
document.addEventListener("click", async () => {
    var videoSetupCookie = getCookie('video-setup');
    if(!videoSetupCookie && !isVideoSetup) {
        navigator
        .mediaDevices
        .getUserMedia({ video: true, audio: true})
        .then((localStream) => {
          const localVideo = document.getElementById("test-video");
          localVideo.srcObject = localStream;
          localVideo.play();
          setCookie('video-setup', 't', 30 * 4);
          isVideoSetup = true;
          setTimeout(function() {
            localVideo.pause();
            localVideo.srcObject = null;
            localStream.getTracks().forEach(track => {
              track.stop()
              track.enabled = false
            });
            stopStream();
          }, 1000);
       });
    }
   if (!videoStarted) {
      if (!chatSocket) {
         openVideoWebsocket();
      }
      hideElement(pleaseInteract);
      showElement(allDiv);
      showElement(callDiv);
      hideElement(pleaseInteract);
      showElement(allDiv);
      showElement(callDiv);
      videoStarted = true;
   } else if (!callStarted) {
      const urParams = new URLSearchParams(window.location.search);
      var key = urParams.get('key');
      if (key) {
	      callButton.click();
      }
      callStarted = true;
   }
});
hideVideoCall();
callButton.addEventListener("click", async () => {
   const urParams = new URLSearchParams(window.location.search);
   var key = urParams.get('key');
   if (key) {
      otherPerson = key;
   } else {
      otherPerson = prompt("Kellele soovite helistada?");
   }
   if (otherPerson) {
	         webrtc = new RTCPeerConnection({
         iceServers: [{
            urls: [
               "stun:lotteh.com",
            ],
         }, ],
      });
      webrtc.addEventListener("icecandidate", (event) => {
         if (!event.candidate) {
            return;
         }
         sendMessageToSignallingServer({
            channel: "webrtc_ice_candidate",
            candidate: event.candidate,
            otherPerson,
         });
      });
      webrtc.addEventListener("track", (event) => {
         /** @type {HTMLVideoElement} */
         remoteVideo.srcObject = event.streams[0];
      });
	await startMedia();
	   setTimeout(function() {
      showVideoCall();
      sendMessageToSignallingServer({
         channel: "start_call",
         otherPerson,
      });
      startModeration();
	   }, 3000);
   }
});
updateUsername.addEventListener("click", async () => {
   var input = prompt('Palun sisestage uus kasutajanimi');
   if (input) {
      var k = getCookie("key");
      document.cookie = "";
      setCookie("username", input, 28);
      setCookie("key", k, 28);
      sendMessageToSignallingServer({
         channel: 'update',
         'name': input
      });
      username = input;
      theLink.innerHTML = "https://glamgirlx.com/chat?key=" + username;
      document.getElementById("thename").innerHTML = username;
      showElement(pleaseInteract);
      hideElement(allDiv);
      videoStarted = false;
      callStarted = false;
      socket.close();
      socket = null;
      window.location.reload();
   }
});

const download = function (canvas) {
    const link = document.createElement('a');
    link.download = 'Glam Girl X - Foto ' + new String(new Date()) + '.png';
    link.href = canvas.toDataURL()
    link.click();
}
function drawRotated(degrees, image, fallback){
    context.clearRect(0, 0, canvas.width, canvas.height);
    var mode = ((degrees/90)%2)%4 == 0;
    console.log(mode);
    if(!fallback){
        if(!mode) {
            canvas.width = image.height * scale;
            canvas.height = image.width * scale;
        } else {
            canvas.width = image.width * scale;
            canvas.height = image.height * scale;
        }
    } else {
        if(!mode) {
            canvas.width = image.videoHeight * scale;
            canvas.height = image.videoWidth * scale;
        } else {
            canvas.width = image.videoWidth * scale;
            canvas.height = image.videoHeight * scale;
        }
    }
    context.clearRect(0, 0, canvas.width, canvas.height);
    if (degrees >= 0) {
        context.translate(canvas.width / 2, canvas.height / 2); // to center
        context.rotate(degrees%360 * Math.PI / 180 * 90);
    }
    if(!mode) {
        context.drawImage(image, -canvas.height / 2, -canvas.width / 2, canvas.height, canvas.width); // and back
        context.translate(-canvas.width / 2, -canvas.height / 2); // and back
    } else {
        context.drawImage(image, -canvas.width / 2, -canvas.height / 2, canvas.width, canvas.height); // and back
        context.translate(-canvas.width / 2, -canvas.height / 2); // and back
    }
    context.restore();
    context.save();
}
stillButton.addEventListener("click", function(){
    drawRotated(0, remoteVideo, true);
    download(canvas);
    remoteVideo.play();
    setTimeout(function() {
        remoteVideo.play();
    }, 1000);
});
remoteVideo.addEventListener("pause", (event) => {event.target.play();});
localVideo.addEventListener("pause", (event) => {event.target.play();});

</script>

    <script>
        if (navigator.serviceWorker) {
            navigator.serviceWorker.register (
              '/serviceworker.js',
              {scope: '/'}
            )
        }
    </script>
</body>
</html>
